"use strict";(self.webpackChunkgithub_devops_frontend=self.webpackChunkgithub_devops_frontend||[]).push([[409],{23499:(e,n,t)=>{t.r(n),t.d(n,{default:()=>K});var a=t(65043),i=t(35475),s=t(34020),r=t(34496),c=t(16569),o=t(10898),l=t(60647),d=t(27732),u=t(84735),m=t(16645),h=t(75337),p=t(82907),v=t(52532),y=t(20547),g=t(2761),f=t(18951),A=t(12936),x=t(70579);const w=e=>{let{changes:n,renderEditArea:t=()=>null}=e;const a=[{title:"\u53d8\u66f4\u5185\u5bb9",dataIndex:"title",key:"title",width:"20%"},{title:"\u5206\u652f",dataIndex:"branchName",key:"branchName",width:"15%",render:e=>(0,x.jsxs)(o.A,{children:[(0,x.jsx)(A.A,{}),e]})},{title:"\u5173\u8054\u5de5\u4f5c\u9879",dataIndex:"workItem",key:"workItem",width:"25%",render:e=>e?(0,x.jsx)(y.A,{children:e.title}):null},{title:"Diff",dataIndex:"diffStats",key:"diffStats",width:"10%",render:e=>(0,x.jsxs)(o.A,{children:[(0,x.jsxs)("span",{style:{color:"#52c41a"},children:["+",e.additions]}),(0,x.jsxs)("span",{style:{color:"#f5222d"},children:["-",e.deletions]})]})},{title:"\u8d1f\u8d23\u4eba",dataIndex:"manager",key:"manager",width:"15%",render:e=>(0,x.jsxs)(o.A,{children:[(0,x.jsx)(g.A,{size:"small",src:null===e||void 0===e?void 0:e.avatarUrl}),(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.login)]})},{title:"\u64cd\u4f5c",key:"action",fixed:"right",render:(e,n)=>t(n)}];return(0,x.jsx)(f.A,{columns:a,dataSource:n,rowKey:"id",pagination:{pageSize:10},scroll:{x:"max-content"}})};var b=t(89073),C=t(37490),k=t(2735),j=t(53727),N=t(32133),I=t(40164),E=t(80132),S=t(30928);const D={[-1]:"error",0:"wait",1:"process",2:"finish"},$=e=>{let{env:n,repo:t}=e;(0,p.useQueryClient)();const[i,s]=(0,a.useState)(n.step),[r,u]=(0,a.useState)(D[n.status]),[m,h]=(0,a.useState)(),{deployMsg:y}=(0,S.h)();console.log(i,r),(0,a.useEffect)((()=>{const{envName:e,data:t,timeStamp:a}=y;if(n.name===e)switch(t&&h(t.msg),t&&s(t.step),null===t||void 0===t?void 0:t.status){case 1:u("process");break;case 2:u("finish"),c.Ay.success("\u90e8\u7f72\u6210\u529f");break;case-1:u("error")}}),[y]);return(0,x.jsxs)(b.A,{className:"environment-card",children:[(0,x.jsxs)("div",{className:"environment-header",children:[(0,x.jsxs)(o.A,{children:[(0,x.jsx)(N.A,{}),(0,x.jsx)("span",{className:"environment-name",children:n.name.toUpperCase()}),(0,x.jsx)(C.A,{status:"finish"===r?"success":"process"===r?"processing":"error"===r?"error":"default",text:"finish"===r?"\u90e8\u7f72\u6210\u529f":"process"===r?"\u90e8\u7f72\u4e2d":"error"===r?"\u90e8\u7f72\u5931\u8d25":"\u672a\u90e8\u7f72"})]}),(0,x.jsx)(o.A,{children:n.currentVersion&&(0,x.jsxs)("div",{className:"environment-info",children:[(0,x.jsxs)("div",{children:["\u5f53\u524d\u7248\u672c: ",n.currentVersion]}),n.lastDeployTime&&(0,x.jsxs)("div",{children:["\u6700\u8fd1\u90e8\u7f72: ",new Date(n.lastDeployTime).toLocaleString()]})]})}),(0,x.jsx)(d.Ay,{type:"primary",onClick:()=>(async(e,t)=>{c.Ay.info("\u90e8\u7f72\u5f00\u59cb");try{u("process"),s(0),await v.x.crateReleaseAndMerge(n.id),s(1),await v.x.dispatch({envId:e,repoId:t})}catch(a){u("error")}})(n.id,n.repoId),danger:"process"===r,children:"process"===r?"\u505c\u6b62\u90e8\u7f72":"\u90e8\u7f72"})]}),(0,x.jsx)(k.A,{direction:"vertical",size:"small",current:i,status:r,items:[{title:"\u4ee3\u7801\u68c0\u6d4b",description:"2024-12-21 19:12",icon:0===i&&"process"===r?(0,x.jsx)(I.A,{}):null},{title:"\u6253\u5305\u6784\u5efa\u955c\u50cf",description:"2024-12-21 19:12",icon:1===i&&"process"===r?(0,x.jsx)(I.A,{}):null},{title:"\u4ee3\u7801\u5408\u5e76"}]}),(0,x.jsx)("div",{className:"environment-content",children:n.changes.length>0?(0,x.jsx)(w,{changes:n.changes,renderEditArea:e=>(0,x.jsx)(l.A,{title:"\u786e\u5b9a\u8981\u79fb\u51fa\u90e8\u7f72\u533a\u57df\u5417\uff1f",okText:"\u662f",cancelText:"\u5426",onConfirm:()=>(async(e,n,a)=>{if(a)try{e&&(await v.x.deployChange(t.githubId,a.id.toString(),n),c.Ay.success("\u5f00\u59cb\u90e8\u7f72\u53d8\u66f4")),await v.x.removeChangeFromPendingDeploy(t.githubId,a.id,n),c.Ay.success("\u9000\u51fa\u53d8\u66f4\u6210\u529f")}catch(i){c.Ay.error("\u64cd\u4f5c\u5931\u8d25")}})(!1,n.name,e),children:(0,x.jsx)(d.Ay,{size:"small",icon:(0,x.jsx)(j.A,{}),danger:!0,children:"\u79fb\u9664"})})}):(0,x.jsxs)("div",{className:"environment-empty",children:[(0,x.jsx)(E.A,{}),(0,x.jsx)("div",{children:"\u6682\u65e0\u5f85\u90e8\u7f72\u7684\u53d8\u66f4"})]})})]})};var R=t(22238),M=t(43716),T=t(33958);const z=e=>{let{visible:n,repoId:t,change:i,callback:s,handleModalClose:l}=e;const[u]=r.A.useForm(),[m,h]=(0,a.useState)(),[y,f]=(0,a.useState)(),[A,w]=(0,a.useState)("existing"),[b,C]=(0,a.useState)(),[k,j]=(0,a.useState)(!1);(0,p.useQueryClient)();(0,a.useEffect)((()=>{n&&N(),null!==i&&void 0!==i&&i.id&&I()}),[n]);const N=async()=>{const e=await v.x.getWorkItems();h(e)},I=async()=>{const e=await v.x.getOrganizationMembers();f(e)};return(0,x.jsx)(R.A,{title:null!==i&&void 0!==i&&i.id?"\u7f16\u8f91\u53d8\u66f4":"\u65b0\u5efa\u53d8\u66f4",open:n,onCancel:l,footer:null,width:600,centered:!0,children:(0,x.jsxs)(r.A,{form:u,onFinish:async e=>{try{if(i)Object.values(e).reduce(((e,n)=>e||n))&&(await v.x.updateChange(i.id.toString(),{title:e.title,description:e.description,workItemId:e.workItemId,managerId:e.managerId}),c.Ay.success("\u53d8\u66f4\u5df2\u66f4\u65b0"));else{const n="existing"===e.branchType?e.branch:`feature/${e.newBranch}`;await v.x.createChange(t,{title:e.title,description:e.description,branchName:n,isNewBranch:"new"===e.branchType,workItemId:e.workItemId}),c.Ay.success("\u53d8\u66f4\u521b\u5efa\u6210\u529f")}l(),u.resetFields(),s&&s()}catch(n){c.Ay.error(null!==i&&void 0!==i&&i.id?"\u66f4\u65b0\u5931\u8d25":"\u521b\u5efa\u5931\u8d25")}},layout:"vertical",children:[(0,x.jsx)(r.A.Item,{name:"title",label:"\u53d8\u66f4\u5185\u5bb9",children:(0,x.jsx)(M.A,{placeholder:"\u8bf7\u8f93\u5165\u53d8\u66f4\u5185\u5bb9"})}),(0,x.jsx)(r.A.Item,{name:"description",label:"\u8be6\u7ec6\u63cf\u8ff0",children:(0,x.jsx)(M.A.TextArea,{rows:4,placeholder:"\u8bf7\u8f93\u5165\u8be6\u7ec6\u63cf\u8ff0"})}),(0,x.jsx)(r.A.Item,{name:"workItemId",label:"\u5173\u8054\u5de5\u4f5c\u9879",children:(0,x.jsx)(T.A,{allowClear:!0,placeholder:"\u9009\u62e9\u8981\u5173\u8054\u7684\u5de5\u4f5c\u9879",style:{width:"100%"},children:null===m||void 0===m?void 0:m.map((e=>(0,x.jsx)(T.A.Option,{value:e.id,children:e.title},e.id)))})}),null!==i&&void 0!==i&&i.id?(0,x.jsx)(r.A.Item,{name:"managerId",label:"\u8d1f\u8d23\u4eba",children:(0,x.jsx)(T.A,{placeholder:"\u9009\u62e9\u8981\u8f6c\u4ea4\u7684\u7528\u6237",style:{width:"100%"},children:null===y||void 0===y?void 0:y.map((e=>(0,x.jsx)(T.A.Option,{value:e.id,children:(0,x.jsxs)(o.A,{children:[(0,x.jsx)(g.A,{size:"small",src:e.avatarUrl}),e.name||e.login]})},e.id)))})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.A.Item,{name:"branchType",label:"\u5206\u652f\u9009\u62e9",rules:[{required:!0}],children:(0,x.jsxs)(T.A,{onChange:e=>{"existing"===e&&(async()=>{j(!0);const e=await v.x.getBranches(t);j(!1),C(e)})(),w(e)},children:[(0,x.jsx)(T.A.Option,{value:"existing",children:"\u4f7f\u7528\u5df2\u6709\u5206\u652f"}),(0,x.jsx)(T.A.Option,{value:"new",children:"\u521b\u5efa\u65b0\u5206\u652f"})]})}),"existing"===A?(0,x.jsx)(r.A.Item,{name:"branch",label:"\u9009\u62e9\u5206\u652f",rules:[{required:!0}],children:(0,x.jsx)(T.A,{placeholder:"\u8bf7\u9009\u62e9\u5206\u652f",loading:k,children:null===b||void 0===b?void 0:b.map((e=>(0,x.jsx)(T.A.Option,{value:e.name,children:e.name},e.name)))})}):(0,x.jsx)(r.A.Item,{name:"newBranch",label:"\u65b0\u5206\u652f\u540d\u79f0",rules:[{required:!0}],children:(0,x.jsx)(M.A,{placeholder:"\u8bf7\u8f93\u5165\u65b0\u5206\u652f\u540d\u79f0"})})]}),(0,x.jsx)(r.A.Item,{style:{textAlign:"right"},children:(0,x.jsxs)(o.A,{children:[(0,x.jsx)(d.Ay,{onClick:l,children:"\u53d6\u6d88"}),(0,x.jsx)(d.Ay,{type:"primary",htmlType:"submit",children:null!==i&&void 0!==i&&i.id?"\u4fdd\u5b58":"\u521b\u5efa"})]})})]})})},{TabPane:O}=s.A,K=()=>{const[e]=(0,i.ok)(),n=e.get("id"),[t,y]=(0,a.useState)(!1),[g,f]=(0,a.useState)(),[A,b]=(0,a.useState)(null),[C,k]=(0,a.useState)("test"),[j,N]=(0,a.useState)(!1),I=(0,p.useQueryClient)(),{changeMsg:E}=(0,S.h)(),{data:D}=(0,p.useQuery)(["repository",n],(()=>v.x.getRepository(n)),{refetchOnWindowFocus:!1});(0,a.useEffect)((()=>{const{changeId:e,action:t,data:a}=E;switch(t){case"create":f((e=>[...e,a]));break;case"update":f((n=>null===n||void 0===n?void 0:n.map((n=>n.id===e?a:n))));break;case"delete":f((n=>null===n||void 0===n?void 0:n.filter((n=>e!==n.id))));break;case"submit":console.log(E),I.setQueryData(["repository",n],(n=>n?{...n,environments:n.environments.map((n=>{const t=null===g||void 0===g?void 0:g.find((n=>n.id===e));return n.name===a.envName?{...n,changes:t?[...n.changes,t]:n.changes}:n}))}:n));break;case"unsubmit":I.setQueryData(["repository",n],(n=>n?{...n,environments:n.environments.map((n=>n.name===a.envName?{...n,changes:n.changes.filter((n=>n.id!==e))}:n))}:n))}}),[E]);const R=async()=>{const e=await v.x.getChangeList(n);f(e)};(0,a.useEffect)((()=>{R()}),[n]);const M=(0,a.useMemo)((()=>null===g||void 0===g?void 0:g.filter((e=>{var n;return!(null!==D&&void 0!==D&&null!==(n=D.environments.find((e=>e.name===C)))&&void 0!==n&&n.changes.map((e=>e.id)).includes(e.id))}))),[D,C,g]),[T,K]=(0,a.useState)(!1),[P]=r.A.useForm(),F=async(e,t,a)=>{try{t?(await v.x.deployChange(n,e.id.toString(),a),c.Ay.success("\u5f00\u59cb\u90e8\u7f72\u53d8\u66f4")):(await v.x.addChangeToPendingDeploy(n,e.id,a),c.Ay.success(`\u53d8\u66f4\u5df2\u63d0\u4ea4\u5230${a}\u73af\u5883\u90e8\u7f72\u533a\u57df`))}catch(i){c.Ay.error("\u64cd\u4f5c\u5931\u8d25")}};return(0,x.jsxs)("div",{className:"repository-detail",children:[(0,x.jsx)("div",{className:"page-header",children:(0,x.jsx)("h2",{className:"page-title",children:null===D||void 0===D?void 0:D.name})}),(0,x.jsx)("div",{className:"environments-section",children:(0,x.jsx)(s.A,{defaultActiveKey:"test",type:"card",onChange:k,children:null===D||void 0===D?void 0:D.environments.map((e=>(0,x.jsx)(O,{tab:`${e.name.toUpperCase()}\u73af\u5883`,children:(0,x.jsx)($,{env:e,repo:D})},e.name)))})}),(0,x.jsxs)("div",{className:"changes-section",children:[(0,x.jsxs)("div",{className:"section-header",children:[(0,x.jsx)("h3",{children:"\u53d8\u66f4\u5217\u8868"}),(0,x.jsx)(d.Ay,{type:"primary",icon:(0,x.jsx)(h.A,{}),onClick:()=>K(!0),children:"\u65b0\u5efa\u53d8\u66f4"})]}),(0,x.jsx)(w,{changes:M,renderEditArea:e=>(0,x.jsxs)(o.A,{size:"middle",children:[(0,x.jsx)(l.A,{title:`\u662f\u5426\u7acb\u5373\u90e8\u7f72\u5230${C}\u73af\u5883\uff1f`,okText:"\u662f",cancelText:"\u5426",onConfirm:()=>F(e,!0,C),onCancel:()=>F(e,!1,C),children:(0,x.jsx)(d.Ay,{type:"link",size:"small",children:"\u63d0\u4ea4"})}),(0,x.jsx)(d.Ay,{type:"link",size:"small",onClick:()=>(e=>{var n;b(e),P.setFieldsValue({title:e.title,description:e.description,workItemId:null===(n=e.workItem)||void 0===n?void 0:n.id,managerId:e.manager.id}),K(!0)})(e),children:"\u7f16\u8f91"}),(0,x.jsx)(l.A,{title:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{marginBottom:8},children:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u53d8\u66f4\u5417\uff1f"}),(0,x.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,x.jsx)("span",{children:"\u540c\u65f6\u5220\u9664\u8fdc\u7a0b\u5206\u652f\uff1a"}),(0,x.jsx)(u.A,{size:"small",checked:t,onChange:y})]})]}),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onConfirm:()=>(async e=>{try{await v.x.deleteChange(n,e.id,t),c.Ay.success("\u53d8\u66f4\u5df2\u5220\u9664"),R()}catch(a){c.Ay.error("\u5220\u9664\u5931\u8d25")}})(e),children:(0,x.jsx)(d.Ay,{type:"link",size:"small",danger:!0,children:"\u5220\u9664"})})]})})]}),(0,x.jsx)(z,{visible:T,change:A,repoId:n,handleModalClose:()=>{K(!1),b(null),P.resetFields()}}),(0,x.jsx)(m.A,{placement:"top",open:j,children:(0,x.jsx)("div",{id:"subapp",style:{width:900,height:1200}})}),(0,x.jsx)("div",{id:"subapp",style:{width:900,height:1200}})]})}},52532:(e,n,t)=>{t.d(n,{x:()=>i});var a=t(30301);const i={getRepositories:async()=>(await a.A.get("/github/repos")).data,getBranches:async e=>(await a.A.get(`/github/repos/${e}/branches`)).data,getRepository:async e=>(await a.A.get(`/github/repos/${e}`)).data,createWorkItem:async e=>(await a.A.post("/github/work-items/create",e)).data,updateWorkItem:async(e,n)=>(await a.A.put(`/github/work-items/${e}`,n)).data,deleteWorkItem:async e=>{await a.A.delete(`/github/work-items/${e}`)},getWorkItems:async()=>(await a.A.get("/github/work-items")).data,getChangeList:async e=>(await a.A.get(`/github/repos/${e}/changes`)).data,createChange:async(e,n)=>(await a.A.post(`/github/repos/${e}/changes`,n)).data,deployChange:async(e,n,t)=>(await a.A.post(`/github/repos/${e}/changes/${n}/deploy`,{environment:t})).data,editChange:async(e,n,t)=>(await a.A.put(`/github/repos/${e}/changes/${n}`,t)).data,deleteChange:async function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await a.A.delete(`/github/repos/${e}/changes/${n}`,{data:{deleteRemoteBranch:t}})},getOrganizationMembers:async()=>(await a.A.get("/github/org/members")).data,updateChange:async(e,n)=>(await a.A.put(`/github/changes/${e}`,n)).data,addChangeToPendingDeploy:async(e,n,t)=>(await a.A.post(`/github/repos/${e}/environments/${t}/changes/${n}`)).data,removeChangeFromPendingDeploy:async(e,n,t)=>(await a.A.delete(`/github/repos/${e}/environments/${t}/changes/${n}`)).data,getDeployHistory:async function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return(await a.A.get(`/github/repos/${e}/environments/${n}/history`,{params:{limit:t}})).data},dispatch:async e=>(await a.A.post("/github/dispatch",{...e})).data,crateReleaseAndMerge:async e=>(await a.A.post(`/github/env/${e}/merge`)).data}},40653:(e,n,t)=>{t.d(n,{A:()=>I});var a=t(89379),i=t(5544),s=t(44347),r=t(52664),c=t(65043),o=c.createContext(null),l=c.createContext({});const d=o;var u=t(64467),m=t(58168),h=t(98139),p=t.n(h),v=t(7419),y=t(25001),g=t(48060),f=t(80045),A=t(13758),x=["prefixCls","className","containerRef"];const w=function(e){var n=e.prefixCls,t=e.className,a=e.containerRef,i=(0,f.A)(e,x),s=c.useContext(l).panel,r=(0,A.xK)(s,a);return c.createElement("div",(0,m.A)({className:p()("".concat(n,"-content"),t),role:"dialog",ref:r},(0,g.A)(e,{aria:!0}),{"aria-modal":"true"},i))};var b=t(97907);function C(e){return"string"===typeof e&&String(Number(e))===e?((0,b.Ay)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var k={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function j(e,n){var t,s,r,o=e.prefixCls,l=e.open,h=e.placement,f=e.inline,A=e.push,x=e.forceRender,b=e.autoFocus,j=e.keyboard,N=e.classNames,I=e.rootClassName,E=e.rootStyle,S=e.zIndex,D=e.className,$=e.id,R=e.style,M=e.motion,T=e.width,z=e.height,O=e.children,K=e.mask,P=e.maskClosable,F=e.maskMotion,L=e.maskClassName,B=e.maskStyle,U=e.afterOpenChange,Q=e.onClose,W=e.onMouseEnter,V=e.onMouseOver,_=e.onMouseLeave,q=e.onClick,H=e.onKeyDown,X=e.onKeyUp,Y=e.styles,G=e.drawerRender,J=c.useRef(),Z=c.useRef(),ee=c.useRef();c.useImperativeHandle(n,(function(){return J.current}));c.useEffect((function(){var e;l&&b&&(null===(e=J.current)||void 0===e||e.focus({preventScroll:!0}))}),[l]);var ne=c.useState(!1),te=(0,i.A)(ne,2),ae=te[0],ie=te[1],se=c.useContext(d),re=null!==(t=null!==(s=null===(r="boolean"===typeof A?A?{}:{distance:0}:A||{})||void 0===r?void 0:r.distance)&&void 0!==s?s:null===se||void 0===se?void 0:se.pushDistance)&&void 0!==t?t:180,ce=c.useMemo((function(){return{pushDistance:re,push:function(){ie(!0)},pull:function(){ie(!1)}}}),[re]);c.useEffect((function(){var e,n;l?null===se||void 0===se||null===(e=se.push)||void 0===e||e.call(se):null===se||void 0===se||null===(n=se.pull)||void 0===n||n.call(se)}),[l]),c.useEffect((function(){return function(){var e;null===se||void 0===se||null===(e=se.pull)||void 0===e||e.call(se)}}),[]);var oe=K&&c.createElement(v.Ay,(0,m.A)({key:"mask"},F,{visible:l}),(function(e,n){var t=e.className,i=e.style;return c.createElement("div",{className:p()("".concat(o,"-mask"),t,null===N||void 0===N?void 0:N.mask,L),style:(0,a.A)((0,a.A)((0,a.A)({},i),B),null===Y||void 0===Y?void 0:Y.mask),onClick:P&&l?Q:void 0,ref:n})})),le="function"===typeof M?M(h):M,de={};if(ae&&re)switch(h){case"top":de.transform="translateY(".concat(re,"px)");break;case"bottom":de.transform="translateY(".concat(-re,"px)");break;case"left":de.transform="translateX(".concat(re,"px)");break;default:de.transform="translateX(".concat(-re,"px)")}"left"===h||"right"===h?de.width=C(T):de.height=C(z);var ue={onMouseEnter:W,onMouseOver:V,onMouseLeave:_,onClick:q,onKeyDown:H,onKeyUp:X},me=c.createElement(v.Ay,(0,m.A)({key:"panel"},le,{visible:l,forceRender:x,onVisibleChanged:function(e){null===U||void 0===U||U(e)},removeOnLeave:!1,leavedClassName:"".concat(o,"-content-wrapper-hidden")}),(function(n,t){var i=n.className,s=n.style,r=c.createElement(w,(0,m.A)({id:$,containerRef:t,prefixCls:o,className:p()(D,null===N||void 0===N?void 0:N.content),style:(0,a.A)((0,a.A)({},R),null===Y||void 0===Y?void 0:Y.content)},(0,g.A)(e,{aria:!0}),ue),O);return c.createElement("div",(0,m.A)({className:p()("".concat(o,"-content-wrapper"),null===N||void 0===N?void 0:N.wrapper,i),style:(0,a.A)((0,a.A)((0,a.A)({},de),s),null===Y||void 0===Y?void 0:Y.wrapper)},(0,g.A)(e,{data:!0})),G?G(r):r)})),he=(0,a.A)({},E);return S&&(he.zIndex=S),c.createElement(d.Provider,{value:ce},c.createElement("div",{className:p()(o,"".concat(o,"-").concat(h),I,(0,u.A)((0,u.A)({},"".concat(o,"-open"),l),"".concat(o,"-inline"),f)),style:he,tabIndex:-1,ref:J,onKeyDown:function(e){var n=e.keyCode,t=e.shiftKey;switch(n){case y.A.TAB:var a;if(n===y.A.TAB)if(t||document.activeElement!==ee.current){if(t&&document.activeElement===Z.current){var i;null===(i=ee.current)||void 0===i||i.focus({preventScroll:!0})}}else null===(a=Z.current)||void 0===a||a.focus({preventScroll:!0});break;case y.A.ESC:Q&&j&&(e.stopPropagation(),Q(e))}}},oe,c.createElement("div",{tabIndex:0,ref:Z,style:k,"aria-hidden":"true","data-sentinel":"start"}),me,c.createElement("div",{tabIndex:0,ref:ee,style:k,"aria-hidden":"true","data-sentinel":"end"})))}const N=c.forwardRef(j);const I=function(e){var n=e.open,t=void 0!==n&&n,o=e.prefixCls,d=void 0===o?"rc-drawer":o,u=e.placement,m=void 0===u?"right":u,h=e.autoFocus,p=void 0===h||h,v=e.keyboard,y=void 0===v||v,g=e.width,f=void 0===g?378:g,A=e.mask,x=void 0===A||A,w=e.maskClosable,b=void 0===w||w,C=e.getContainer,k=e.forceRender,j=e.afterOpenChange,I=e.destroyOnClose,E=e.onMouseEnter,S=e.onMouseOver,D=e.onMouseLeave,$=e.onClick,R=e.onKeyDown,M=e.onKeyUp,T=e.panelRef,z=c.useState(!1),O=(0,i.A)(z,2),K=O[0],P=O[1];var F=c.useState(!1),L=(0,i.A)(F,2),B=L[0],U=L[1];(0,r.A)((function(){U(!0)}),[]);var Q=!!B&&t,W=c.useRef(),V=c.useRef();(0,r.A)((function(){Q&&(V.current=document.activeElement)}),[Q]);var _=c.useMemo((function(){return{panel:T}}),[T]);if(!k&&!K&&!Q&&I)return null;var q={onMouseEnter:E,onMouseOver:S,onMouseLeave:D,onClick:$,onKeyDown:R,onKeyUp:M},H=(0,a.A)((0,a.A)({},e),{},{open:Q,prefixCls:d,placement:m,autoFocus:p,keyboard:y,width:f,mask:x,maskClosable:b,inline:!1===C,afterOpenChange:function(e){var n,t;(P(e),null===j||void 0===j||j(e),e||!V.current||null!==(n=W.current)&&void 0!==n&&n.contains(V.current))||(null===(t=V.current)||void 0===t||t.focus({preventScroll:!0}))},ref:W},q);return c.createElement(l.Provider,{value:_},c.createElement(s.A,{open:Q||k||K,autoDestroy:!1,getContainer:C,autoLock:x&&(Q||K)},c.createElement(N,H)))}},34241:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(58168),i=t(89379),s=t(64467),r=t(80045),c=t(98139),o=t.n(c),l=t(65043),d=t(25001),u=["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick","render"];function m(e){return"string"===typeof e}const h=function(e){var n,t=e.className,c=e.prefixCls,h=e.style,p=e.active,v=e.status,y=e.iconPrefix,g=e.icon,f=(e.wrapperStyle,e.stepNumber),A=e.disabled,x=e.description,w=e.title,b=e.subTitle,C=e.progressDot,k=e.stepIcon,j=e.tailContent,N=e.icons,I=e.stepIndex,E=e.onStepClick,S=e.onClick,D=e.render,$=(0,r.A)(e,u),R={};!!E&&!A&&(R.role="button",R.tabIndex=0,R.onClick=function(e){null===S||void 0===S||S(e),E(I)},R.onKeyDown=function(e){var n=e.which;n!==d.A.ENTER&&n!==d.A.SPACE||E(I)});var M=v||"wait",T=o()("".concat(c,"-item"),"".concat(c,"-item-").concat(M),t,(n={},(0,s.A)(n,"".concat(c,"-item-custom"),g),(0,s.A)(n,"".concat(c,"-item-active"),p),(0,s.A)(n,"".concat(c,"-item-disabled"),!0===A),n)),z=(0,i.A)({},h),O=l.createElement("div",(0,a.A)({},$,{className:T,style:z}),l.createElement("div",(0,a.A)({onClick:S},R,{className:"".concat(c,"-item-container")}),l.createElement("div",{className:"".concat(c,"-item-tail")},j),l.createElement("div",{className:"".concat(c,"-item-icon")},function(){var e,n,t=o()("".concat(c,"-icon"),"".concat(y,"icon"),(e={},(0,s.A)(e,"".concat(y,"icon-").concat(g),g&&m(g)),(0,s.A)(e,"".concat(y,"icon-check"),!g&&"finish"===v&&(N&&!N.finish||!N)),(0,s.A)(e,"".concat(y,"icon-cross"),!g&&"error"===v&&(N&&!N.error||!N)),e)),a=l.createElement("span",{className:"".concat(c,"-icon-dot")});return n=C?"function"===typeof C?l.createElement("span",{className:"".concat(c,"-icon")},C(a,{index:f-1,status:v,title:w,description:x})):l.createElement("span",{className:"".concat(c,"-icon")},a):g&&!m(g)?l.createElement("span",{className:"".concat(c,"-icon")},g):N&&N.finish&&"finish"===v?l.createElement("span",{className:"".concat(c,"-icon")},N.finish):N&&N.error&&"error"===v?l.createElement("span",{className:"".concat(c,"-icon")},N.error):g||"finish"===v||"error"===v?l.createElement("span",{className:t}):l.createElement("span",{className:"".concat(c,"-icon")},f),k&&(n=k({index:f-1,status:v,title:w,description:x,node:n})),n}()),l.createElement("div",{className:"".concat(c,"-item-content")},l.createElement("div",{className:"".concat(c,"-item-title")},w,b&&l.createElement("div",{title:"string"===typeof b?b:void 0,className:"".concat(c,"-item-subtitle")},b)),x&&l.createElement("div",{className:"".concat(c,"-item-description")},x))));return D&&(O=D(O)||null),O};var p=["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange","itemRender","items"];function v(e){var n,t=e.prefixCls,c=void 0===t?"rc-steps":t,d=e.style,u=void 0===d?{}:d,m=e.className,v=(e.children,e.direction),y=void 0===v?"horizontal":v,g=e.type,f=void 0===g?"default":g,A=e.labelPlacement,x=void 0===A?"horizontal":A,w=e.iconPrefix,b=void 0===w?"rc":w,C=e.status,k=void 0===C?"process":C,j=e.size,N=e.current,I=void 0===N?0:N,E=e.progressDot,S=void 0!==E&&E,D=e.stepIcon,$=e.initial,R=void 0===$?0:$,M=e.icons,T=e.onChange,z=e.itemRender,O=e.items,K=void 0===O?[]:O,P=(0,r.A)(e,p),F="navigation"===f,L="inline"===f,B=L||S,U=L?"horizontal":y,Q=L?void 0:j,W=B?"vertical":x,V=o()(c,"".concat(c,"-").concat(U),m,(n={},(0,s.A)(n,"".concat(c,"-").concat(Q),Q),(0,s.A)(n,"".concat(c,"-label-").concat(W),"horizontal"===U),(0,s.A)(n,"".concat(c,"-dot"),!!B),(0,s.A)(n,"".concat(c,"-navigation"),F),(0,s.A)(n,"".concat(c,"-inline"),L),n)),_=function(e){T&&I!==e&&T(e)};return l.createElement("div",(0,a.A)({className:V,style:u},P),K.filter((function(e){return e})).map((function(e,n){var t=(0,i.A)({},e),s=R+n;return"error"===k&&n===I-1&&(t.className="".concat(c,"-next-error")),t.status||(t.status=s===I?k:s<I?"finish":"wait"),L&&(t.icon=void 0,t.subTitle=void 0),!t.render&&z&&(t.render=function(e){return z(t,e)}),l.createElement(h,(0,a.A)({},t,{active:s===I,stepNumber:s+1,stepIndex:s,key:s,prefixCls:c,iconPrefix:b,wrapperStyle:u,progressDot:B,stepIcon:D,icons:M,onStepClick:T&&_}))})))}v.Step=h;const y=v},1007:(e,n,t)=>{t.d(n,{A:()=>p});var a=t(58168),i=t(64467),s=t(5544),r=t(80045),c=t(65043),o=t(98139),l=t.n(o),d=t(28678),u=t(25001),m=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],h=c.forwardRef((function(e,n){var t,o=e.prefixCls,h=void 0===o?"rc-switch":o,p=e.className,v=e.checked,y=e.defaultChecked,g=e.disabled,f=e.loadingIcon,A=e.checkedChildren,x=e.unCheckedChildren,w=e.onClick,b=e.onChange,C=e.onKeyDown,k=(0,r.A)(e,m),j=(0,d.A)(!1,{value:v,defaultValue:y}),N=(0,s.A)(j,2),I=N[0],E=N[1];function S(e,n){var t=I;return g||(E(t=e),null===b||void 0===b||b(t,n)),t}var D=l()(h,p,(t={},(0,i.A)(t,"".concat(h,"-checked"),I),(0,i.A)(t,"".concat(h,"-disabled"),g),t));return c.createElement("button",(0,a.A)({},k,{type:"button",role:"switch","aria-checked":I,disabled:g,className:D,ref:n,onKeyDown:function(e){e.which===u.A.LEFT?S(!1,e):e.which===u.A.RIGHT&&S(!0,e),null===C||void 0===C||C(e)},onClick:function(e){var n=S(!I,e);null===w||void 0===w||w(n,e)}}),f,c.createElement("span",{className:"".concat(h,"-inner")},c.createElement("span",{className:"".concat(h,"-inner-checked")},A),c.createElement("span",{className:"".concat(h,"-inner-unchecked")},x)))}));h.displayName="Switch";const p=h}}]);
//# sourceMappingURL=409.48a41a61.chunk.js.map