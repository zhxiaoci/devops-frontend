/*! For license information please see 5405.d4cbee1f.js.LICENSE.txt */
"use strict";(self.webpackChunkgithub_devops_frontend=self.webpackChunkgithub_devops_frontend||[]).push([[5405],{1186:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});n(5043);var r=n(9572),o=n(9073),a=n(547),i=n(2761),u=n(7732),s=n(9800),c=n(1645),f=n(3216),d=n(5475),l=n(2907),p=n(2532),g=n(7288),h=n(579);const y=()=>{const{repoName:e}=(0,f.g)(),[t]=(0,d.ok)(),n=t.get("id"),{data:y,isLoading:v}=(0,l.useQuery)(["workItems",n],(()=>p.x.getWorkItems()),{enabled:!!n}),b=[g.v.Open,g.v.InProgress,g.v.Done],w={[g.v.Open]:"\u5f85\u5904\u7406",[g.v.InProgress]:"\u8fdb\u884c\u4e2d",[g.v.Done]:"\u5df2\u5b8c\u6210"},m=null===y||void 0===y?void 0:y.reduce(((e,t)=>(e[t.status]||(e[t.status]=[]),e[t.status].push(t),e)),{}),x=(0,l.useQueryClient)(),A=(0,l.useMutation)((e=>p.x.updateWorkItem(e.workItemId,{status:e.status})),{onSuccess:()=>{x.invalidateQueries(["workItems",n])}}),k=e=>{var t;return(0,h.jsxs)(o.A,{className:"work-item-card",children:[(0,h.jsxs)("div",{className:"work-item-header",children:[(0,h.jsx)("div",{className:"work-item-title",children:e.title}),(0,h.jsx)(a.A,{color:g.R[e.status].color,children:g.R[e.status].text})]}),(0,h.jsx)("div",{className:"work-item-meta",children:null===(t=e.assignees)||void 0===t?void 0:t.map((e=>(0,h.jsx)(i.A,{size:"small",src:e.user.avatarUrl,style:{marginRight:4}},e.user.id)))}),(0,h.jsxs)("div",{className:"work-item-actions",children:[(0,h.jsx)(u.Ay,{type:"link",size:"small",onClick:()=>console.log(e),children:"\u7f16\u8f91"}),(0,h.jsx)(u.Ay,{type:"link",size:"small",danger:!0,onClick:()=>console.log(e),children:"\u5220\u9664"})]})]})};return v?(0,h.jsx)("div",{children:"Loading..."}):(0,h.jsxs)("div",{className:"work-items-board",children:[(0,h.jsx)("h2",{children:"\u5de5\u4f5c\u9879\u770b\u677f"}),(0,h.jsx)(r.JY,{onDragEnd:e=>{if(!e.destination)return;const{draggableId:t,destination:n}=e,r=n.droppableId;A.mutate({workItemId:t,status:r})},children:(0,h.jsx)(s.A,{gutter:16,children:b.map((e=>(0,h.jsx)(c.A,{span:8,children:(0,h.jsx)(o.A,{title:w[e],children:(0,h.jsx)(r.gL,{droppableId:e,children:t=>{var n;return(0,h.jsxs)("div",{ref:t.innerRef,...t.droppableProps,style:{minHeight:500},children:[null===m||void 0===m||null===(n=m[e])||void 0===n?void 0:n.map(((e,t)=>(0,h.jsx)(r.sx,{draggableId:e.id.toString(),index:t,children:t=>(0,h.jsx)(o.A,{size:"small",className:"work-item-card",style:{marginBottom:8,...t.draggableProps.style},ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,children:k(e)})},e.id))),t.placeholder]})}})})},e)))})})]})}},2532:(e,t,n)=>{n.d(t,{x:()=>o});var r=n(301);const o={getRepositories:async()=>(await r.A.get("/github/repos")).data,getBranches:async e=>(await r.A.get(`/github/repos/${e}/branches`)).data,getRepository:async e=>(await r.A.get(`/github/repos/${e}`)).data,createWorkItem:async e=>(await r.A.post("/github/work-items/create",e)).data,updateWorkItem:async(e,t)=>(await r.A.put(`/github/work-items/${e}`,t)).data,deleteWorkItem:async e=>{await r.A.delete(`/github/work-items/${e}`)},getWorkItems:async()=>(await r.A.get("/github/work-items")).data,getChangeList:async e=>(await r.A.get(`/github/repos/${e}/changes`)).data,createChange:async(e,t)=>(await r.A.post(`/github/repos/${e}/changes`,t)).data,deployChange:async(e,t,n)=>(await r.A.post(`/github/repos/${e}/changes/${t}/deploy`,{environment:n})).data,editChange:async(e,t,n)=>(await r.A.put(`/github/repos/${e}/changes/${t}`,n)).data,deleteChange:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];await r.A.delete(`/github/repos/${e}/changes/${t}`,{data:{deleteRemoteBranch:n}})},getOrganizationMembers:async()=>(await r.A.get("/github/org/members")).data,updateChange:async(e,t)=>(await r.A.put(`/github/changes/${e}`,t)).data,addChangeToPendingDeploy:async(e,t,n)=>(await r.A.post(`/github/repos/${e}/environments/${n}/changes/${t}`)).data,removeChangeFromPendingDeploy:async(e,t,n)=>(await r.A.delete(`/github/repos/${e}/environments/${n}/changes/${t}`)).data,getDeployHistory:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return(await r.A.get(`/github/repos/${e}/environments/${t}/history`,{params:{limit:n}})).data},dispatch:async e=>(await r.A.post("/github/dispatch",{...e})).data,crateReleaseAndMerge:async e=>(await r.A.post(`/github/env/${e}/merge`)).data}},7288:(e,t,n)=>{n.d(t,{R:()=>o,v:()=>r});let r=function(e){return e.Open="open",e.InProgress="in_progress",e.Done="done",e}({});const o={[r.Open]:{color:"blue",text:"\u5f85\u5904\u7406"},[r.InProgress]:{color:"orange",text:"\u8fdb\u884c\u4e2d"},[r.Done]:{color:"green",text:"\u5df2\u5b8c\u6210"}}},9280:(e,t,n)=>{n(5043),n(9880),n(4002),n(7454),n(6397)},3316:(e,t,n)=>{n(5043),n(6397),n(9880)},3383:(e,t,n)=>{n.d(t,{Kq:()=>r.Kq,Ng:()=>r.Ng});var r=n(7745),o=n(7950);(0,n(8535).d)(o.unstable_batchedUpdates)},4002:(e,t,n)=>{n.d(t,{K:()=>a});var r=n(8535);var o={notify:function(){},get:function(){return[]}};function a(e,t){var n,a=o;function i(){s.onStateChange&&s.onStateChange()}function u(){n||(n=t?t.addNestedSub(i):e.subscribe(i),a=function(){var e=(0,r.f)(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var s={addNestedSub:function(e){return u(),a.subscribe(e)},notifyNestedSubs:function(){a.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:u,tryUnsubscribe:function(){n&&(n(),n=void 0,a.clear(),a=o)},getListeners:function(){return a}};return s}},8535:(e,t,n)=>{n.d(t,{d:()=>o,f:()=>a});var r=function(e){e()},o=function(e){return r=e},a=function(){return r}},5419:(e,t,n)=>{function r(e,t){var n={},r=function(r){var o=e[r];"function"===typeof o&&(n[r]=function(){return t(o.apply(void 0,arguments))})};for(var o in e)r(o);return n}n.d(t,{A:()=>r})},4139:(e,t,n)=>{function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}n.d(t,{A:()=>o})},7454:(e,t,n)=>{n.d(t,{E:()=>o});var r=n(5043),o="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect},7358:(e,t)=>{var n=60103,r=60106,o=60107,a=60108,i=60114,u=60109,s=60110,c=60112,f=60113,d=60120,l=60115,p=60116,g=60121,h=60122,y=60117,v=60129,b=60131;if("function"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w("react.element"),r=w("react.portal"),o=w("react.fragment"),a=w("react.strict_mode"),i=w("react.profiler"),u=w("react.provider"),s=w("react.context"),c=w("react.forward_ref"),f=w("react.suspense"),d=w("react.suspense_list"),l=w("react.memo"),p=w("react.lazy"),g=w("react.block"),h=w("react.server.block"),y=w("react.fundamental"),v=w("react.debug_trace_mode"),b=w("react.legacy_hidden")}function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case o:case i:case a:case f:case d:return e;default:switch(e=e&&e.$$typeof){case s:case c:case p:case l:case u:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return m(e)===s}},2706:(e,t,n)=>{e.exports=n(7358)},805:(e,t,n)=>{n.d(t,{Tw:()=>p,Zz:()=>l,y$:()=>c,zH:()=>d});var r=n(9379);function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"===typeof Symbol&&Symbol.observable||"@@observable",i=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function s(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(o(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(o(1));return n(c)(e,t)}if("function"!==typeof e)throw new Error(o(2));var i=e,f=t,d=[],l=d,p=!1;function g(){l===d&&(l=d.slice())}function h(){if(p)throw new Error(o(3));return f}function y(e){if("function"!==typeof e)throw new Error(o(4));if(p)throw new Error(o(5));var t=!0;return g(),l.push(e),function(){if(t){if(p)throw new Error(o(6));t=!1,g();var n=l.indexOf(e);l.splice(n,1),d=null}}}function v(e){if(!s(e))throw new Error(o(7));if("undefined"===typeof e.type)throw new Error(o(8));if(p)throw new Error(o(9));try{p=!0,f=i(f,e)}finally{p=!1}for(var t=d=l,n=0;n<t.length;n++){(0,t[n])()}return e}return v({type:u.INIT}),(r={dispatch:v,subscribe:y,getState:h,replaceReducer:function(e){if("function"!==typeof e)throw new Error(o(10));i=e,v({type:u.REPLACE})}})[a]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e},r}function f(e,t){return function(){return t(e.apply(this,arguments))}}function d(e,t){if("function"===typeof e)return f(e,t);if("object"!==typeof e||null===e)throw new Error(o(16));var n={};for(var r in e){var a=e[r];"function"===typeof a&&(n[r]=f(a,t))}return n}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),a=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map((function(e){return e(i)}));return a=l.apply(void 0,u)(n.dispatch),(0,r.A)((0,r.A)({},n),{},{dispatch:a})}}}},5744:(e,t,n)=>{n.d(t,{Kr:()=>a,hb:()=>i});var r=n(5043);function o(e,t){var n=(0,r.useState)((function(){return{inputs:t,result:e()}}))[0],o=(0,r.useRef)(!0),a=(0,r.useRef)(n),i=o.current||Boolean(t&&a.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.current.inputs))?a.current:{inputs:t,result:e()};return(0,r.useEffect)((function(){o.current=!1,a.current=i}),[i]),i.result}var a=o,i=function(e,t){return o((function(){return e}),t)}},3404:(e,t,n)=>{n.d(t,{A:()=>a});var r=!0,o="Invariant failed";function a(e,t){if(!e){if(r)throw new Error(o);var n="function"===typeof t?t():t,a=n?"".concat(o,": ").concat(n):o;throw new Error(a)}}}}]);
//# sourceMappingURL=5405.d4cbee1f.js.map